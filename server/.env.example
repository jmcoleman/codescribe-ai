# Anthropic Claude API Key
# Get your API key from: https://console.anthropic.com/
CLAUDE_API_KEY=sk-ant-api03-your-key-here-replace-with-actual-key

# Server Configuration
PORT=3000
NODE_ENV=development

# Feature Flags
ENABLE_AUTH=false  # Set to true to enable authentication features (requires DB and auth env vars)

# CORS Configuration (for production)
# Comma-separated list of allowed origins
# Development: http://localhost:5173
# Production: https://codescribeai.com,https://codescribe-ai.vercel.app
ALLOWED_ORIGINS=http://localhost:5173

# Client URL (for OAuth redirects)
# Development: http://localhost:5173
# Production: https://codescribeai.com
CLIENT_URL=http://localhost:5173

# Rate Limiting Configuration
RATE_LIMIT_WINDOW_MS=60000      # 1 minute window
RATE_LIMIT_MAX=10               # Max requests per window per IP
RATE_LIMIT_HOURLY_MAX=100       # Max generations per hour per IP

# Database Configuration (Neon Postgres via Vercel Marketplace)
# Setup: Vercel Dashboard → Storage → Add Neon → Copy .env.local snippet
# Docs: docs/deployment/VERCEL-POSTGRES-SETUP.md
# Free tier: 512 MB storage, 20 projects, unlimited compute (first 50K users)

# Recommended for most uses
DATABASE_URL=postgresql://neondb_owner:your-password@ep-example-12345-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require

# For uses requiring a connection without pgbouncer
DATABASE_URL_UNPOOLED=postgresql://neondb_owner:your-password@ep-example-12345.us-east-1.aws.neon.tech/neondb?sslmode=require

# Parameters for constructing your own connection string
PGHOST=ep-example-12345-pooler.us-east-1.aws.neon.tech
PGHOST_UNPOOLED=ep-example-12345.us-east-1.aws.neon.tech
PGUSER=neondb_owner
PGDATABASE=neondb
PGPASSWORD=your-neon-password-here

# Parameters for Vercel Postgres Templates (used by CodeScribe)
POSTGRES_URL=postgresql://neondb_owner:your-password@ep-example-12345-pooler.us-east-1.aws.neon.tech/neondb?sslmode=require
POSTGRES_URL_NON_POOLING=postgresql://neondb_owner:your-password@ep-example-12345.us-east-1.aws.neon.tech/neondb?sslmode=require
POSTGRES_USER=neondb_owner
POSTGRES_HOST=ep-example-12345-pooler.us-east-1.aws.neon.tech
POSTGRES_PASSWORD=your-neon-password-here
POSTGRES_DATABASE=neondb
POSTGRES_URL_NO_SSL=postgresql://neondb_owner:your-password@ep-example-12345-pooler.us-east-1.aws.neon.tech/neondb
POSTGRES_PRISMA_URL=postgresql://neondb_owner:your-password@ep-example-12345-pooler.us-east-1.aws.neon.tech/neondb?connect_timeout=15&sslmode=require

# Neon Auth environment variables for Next.js (optional, if using Neon Auth)
# NEXT_PUBLIC_STACK_PROJECT_ID=your-stack-project-id
# NEXT_PUBLIC_STACK_PUBLISHABLE_CLIENT_KEY=your-publishable-key
# STACK_SECRET_SERVER_KEY=your-secret-key

# Authentication Configuration
# Generate secure secrets with: openssl rand -base64 32
JWT_SECRET=replace-with-generated-secret-min-32-characters
SESSION_SECRET=replace-with-generated-secret-min-32-characters

# Cron Jobs Configuration (Optional for Local Development)
# Generate secure secret with: openssl rand -base64 32
# Used to authenticate Vercel Cron requests to /api/cron/permanent-deletions
# Required for automated permanent deletion of user accounts (GDPR/CCPA compliance)
# See: docs/database/USER-DELETION-COMPLIANCE.md
#
# Local Development Options:
# 1. Set CRON_SECRET if you need to test the cron endpoint locally via curl:
#    curl -X POST http://localhost:3000/api/cron/permanent-deletions \
#      -H "Authorization: Bearer your-test-secret"
# 2. Leave commented out if you only need unit tests (simpler, recommended)
#    - Unit tests don't require the HTTP endpoint
#    - Production/preview will work fine when properly configured in Vercel
#
# Production/Preview: REQUIRED in Vercel environment variables (unique per environment)
# CRON_SECRET=replace-with-generated-secret-min-32-characters

# GitHub OAuth Configuration (optional, for OAuth login)
# Get credentials from: https://github.com/settings/developers
# Development callback: http://localhost:3000/api/auth/github/callback
# Production callback: https://codescribeai.com/api/auth/github/callback
GITHUB_CLIENT_ID=Iv1.your-client-id-here
GITHUB_CLIENT_SECRET=your-github-oauth-client-secret-here
GITHUB_CALLBACK_URL=http://localhost:3000/api/auth/github/callback

# Resend Email Service Configuration (for password reset emails)
# Setup guide: docs/deployment/RESEND-SETUP.md
# Get API key from: https://resend.com/api-keys
# Free tier: 3,000 emails/month, 100 emails/day
# Production domain: codescribeai.com (configure in Resend dashboard)
#
# Environment-specific sender emails (recommended):
# - Development: dev@codescribeai.com
# - Preview: preview@codescribeai.com
# - Production: noreply@codescribeai.com
RESEND_API_KEY=re_your_resend_api_key_here
# Resend's default domain for testing
EMAIL_FROM="CodeScribe AI <onboarding@resend.dev>"

# Email Mocking Configuration
# Controls whether emails are actually sent via Resend or mocked to console
#
# Behavior:
# - MOCK_EMAILS=true: Always mock emails (dev, test, production) - logs to console
# - MOCK_EMAILS=false: Always send real emails via Resend (dev, test, production)
# - MOCK_EMAILS not set: Mock in dev/test, send real in production (safe default)
#
# Most use cases:
# - Development testing: MOCK_EMAILS=false (to test real email delivery)
# - CI/CD tests: Leave unset or MOCK_EMAILS=true (to avoid sending emails)
# - Production: Leave unset (will automatically send real emails)
#
# Note: If MOCK_EMAILS=false but RESEND_API_KEY is not set, will force mocking with warning
# MOCK_EMAILS=false

# Support & Sales Email Destinations (Contact Forms)
# Where support/sales requests from contact forms should be sent
# Development/Free Tier: Set to your personal email (Resend can send to any email)
# Production: Set to support@/sales@codescribeai.com (once domain is verified in Resend)
# Note: Manual emails to these addresses still work via your email forwarding
# SUPPORT_EMAIL=your-personal-email@gmail.com
# SALES_EMAIL=your-personal-email@gmail.com

# Generate secure MIGRATION_SECRET with: openssl rand -base64 32
MIGRATION_SECRET=your-secret-here

# Stripe Configuration
# Stripe Environment: 'sandbox' (default) or 'production'
# - sandbox: Uses Stripe test mode (test cards, test price IDs, no real charges)
# - production: Uses Stripe live mode (real payments, live price IDs)
# Set to 'production' in Vercel environment variables when ready to go live
STRIPE_ENV=sandbox

# Stripe API Keys
# Test mode (sandbox): sk_test_xxxxx and pk_test_xxxxx
# Live mode (production): sk_live_xxxxx and pk_live_xxxxx
STRIPE_SECRET_KEY=sk_test_xxxxx
STRIPE_PUBLISHABLE_KEY=pk_test_xxxxx
STRIPE_WEBHOOK_SECRET=whsec_xxxxx  # From Step 4

# Price IDs - Sandbox/Test Mode (from Step 2)
# Replace with live mode price IDs when STRIPE_ENV=production
STRIPE_PRICE_STARTER_MONTHLY=price_xxxxx
STRIPE_PRICE_STARTER_ANNUAL=price_xxxxx
STRIPE_PRICE_PRO_MONTHLY=price_xxxxx
STRIPE_PRICE_PRO_ANNUAL=price_xxxxx
STRIPE_PRICE_TEAM_MONTHLY=price_xxxxx
STRIPE_PRICE_TEAM_ANNUAL=price_xxxxx

# URLs
STRIPE_SUCCESS_URL=http://localhost:5173/payment/success
STRIPE_CANCEL_URL=http://localhost:5173/pricing
CLIENT_URL=http://localhost:5173